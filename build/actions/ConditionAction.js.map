{
  "version": 3,
  "sources": ["../../src/actions/ConditionAction.ts"],
  "sourcesContent": ["import type { Action } from \"./Action\";\nimport type { Condition } from \"./conditions/Condition\";\n\n/**\n * ConditionAction\n */\nexport class ConditionAction implements Action {\n    private readonly condition: Condition;\n    private action: Action;\n\n    /**\n     * @param condition Condition\n     * @param action Action\n     * @param adapter ioBroker\n     */\n    constructor(\n        condition: Condition,\n        action: Action,\n        private adapter: ioBroker.Adapter,\n    ) {\n        if (condition == null) {\n            this.adapter.log.error(\"condition may not be null or undefined\");\n        }\n        if (action == null) {\n            this.adapter.log.error(\"action may not be null or undefined\");\n        }\n        this.condition = condition;\n        this.action = action;\n    }\n\n    /**\n     * getAction\n     */\n    public getAction(): Action {\n        return this.action;\n    }\n\n    /**\n     * @param action Action\n     */\n    public setAction(action: Action): void {\n        if (action == null) {\n            this.adapter.log.error(\"action may not be null or undefined\");\n            return;\n        }\n        this.action = action;\n    }\n\n    /**\n     * getCondition\n     */\n    public getCondition(): Condition {\n        return this.condition;\n    }\n\n    /**\n     * execute\n     */\n    public execute(): void {\n        this.condition\n            .evaluate()\n            .then(result => {\n                if (result) {\n                    this.adapter.log.debug(`Executing action because condition ${this.condition} evaluated to true`);\n                    this.action.execute(false);\n                } else {\n                    this.adapter.log.debug(\n                        `Not executing action because condition ${this.condition} evaluated to false`,\n                    );\n                }\n            })\n            .catch(e => {\n                this.adapter.log.error(`Error while evaluating condition: ${this.condition} - ${e}`);\n            });\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAMO,MAAM,gBAAkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAS3C,YACI,WACA,QACQ,SACV;AADU;AAER,QAAI,aAAa,MAAM;AACnB,WAAK,QAAQ,IAAI,MAAM,wCAAwC;AAAA,IACnE;AACA,QAAI,UAAU,MAAM;AAChB,WAAK,QAAQ,IAAI,MAAM,qCAAqC;AAAA,IAChE;AACA,SAAK,YAAY;AACjB,SAAK,SAAS;AAAA,EAClB;AAAA,EArBiB;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAyBD,YAAoB;AACvB,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAKO,UAAU,QAAsB;AACnC,QAAI,UAAU,MAAM;AAChB,WAAK,QAAQ,IAAI,MAAM,qCAAqC;AAC5D;AAAA,IACJ;AACA,SAAK,SAAS;AAAA,EAClB;AAAA;AAAA;AAAA;AAAA,EAKO,eAA0B;AAC7B,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAKO,UAAgB;AACnB,SAAK,UACA,SAAS,EACT,KAAK,YAAU;AACZ,UAAI,QAAQ;AACR,aAAK,QAAQ,IAAI,MAAM,sCAAsC,KAAK,SAAS,oBAAoB;AAC/F,aAAK,OAAO,QAAQ,KAAK;AAAA,MAC7B,OAAO;AACH,aAAK,QAAQ,IAAI;AAAA,UACb,0CAA0C,KAAK,SAAS;AAAA,QAC5D;AAAA,MACJ;AAAA,IACJ,CAAC,EACA,MAAM,OAAK;AACR,WAAK,QAAQ,IAAI,MAAM,qCAAqC,KAAK,SAAS,MAAM,CAAC,EAAE;AAAA,IACvF,CAAC;AAAA,EACT;AACJ;",
  "names": []
}
