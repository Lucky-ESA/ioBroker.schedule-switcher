{
  "version": 3,
  "sources": ["../../src/triggers/OneTimeTrigger.ts"],
  "sourcesContent": ["import type { Action } from \"../actions/Action\";\nimport type { Destroyable } from \"../Destroyable\";\nimport type { Trigger } from \"./Trigger\";\n\n/**\n * OneTimeTrigger\n */\nexport class OneTimeTrigger implements Trigger, Destroyable {\n    private readonly id: string;\n    private readonly objectId: number;\n    private readonly timedate: boolean;\n    private action: Action;\n    private readonly date: Date;\n    private readonly onDestroy: (() => void) | null;\n\n    /**\n     * @param id ID\n     * @param objectId Object ID\n     * @param timedate Date\n     * @param action Action\n     * @param date Date\n     * @param onDestroy Destroy\n     */\n    constructor(\n        id: string,\n        objectId: number,\n        timedate: boolean,\n        action: Action,\n        date: Date,\n        onDestroy: (() => void) | null,\n    ) {\n        if (id == null) {\n            throw new Error(\"Id may not be null or undefined.\");\n        }\n        if (action == null) {\n            throw new Error(\"Action may not be null or undefined.\");\n        }\n        if (date == null) {\n            throw new Error(\"Date may not be null or undefined.\");\n        }\n        this.id = id;\n        this.objectId = objectId;\n        this.timedate = timedate;\n        this.action = action;\n        this.date = new Date(date);\n        this.onDestroy = onDestroy;\n    }\n\n    /**\n     * getAction\n     */\n    public getAction(): Action {\n        return {\n            execute: (trigger: any) => {\n                this.action.execute(trigger);\n                this.destroy();\n            },\n        } as Action;\n    }\n\n    /**\n     * @param action Action\n     */\n    public setAction(action: Action): void {\n        if (action == null) {\n            throw new Error(\"Action may not be null or undefined.\");\n        }\n        this.action = action;\n    }\n\n    /**\n     * @returns ID\n     */\n    public getId(): string {\n        return this.id;\n    }\n\n    /**\n     * @returns date\n     */\n    public getDate(): Date {\n        return new Date(this.date);\n    }\n\n    /**\n     * @returns objectid\n     */\n    public getObjectId(): number {\n        return this.objectId;\n    }\n\n    /**\n     * @returns time\n     */\n    public getTimeDate(): boolean {\n        return this.timedate;\n    }\n\n    /**\n     * getData\n     */\n    public getData(): any {\n        return {\n            id: this.getId(),\n            objectId: this.getObjectId(),\n            timedate: this.getTimeDate(),\n            date: this.getDate().toISOString(),\n            trigger: \"OneTimeTrigger\",\n        };\n    }\n\n    /**\n     * @returns string\n     */\n    public toString(): string {\n        return `OneTimeTrigger {id=${this.getId()}, date=${this.getDate().toISOString()}, timedate=${this.getTimeDate()}}`;\n    }\n\n    /**\n     * @returns action\n     */\n    public getInternalAction(): Action {\n        return this.action;\n    }\n\n    /**\n     * Destroy all\n     */\n    public destroy(): void {\n        if (this.onDestroy) {\n            this.onDestroy();\n        }\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAOO,MAAM,eAA+C;AAAA,EACvC;AAAA,EACA;AAAA,EACA;AAAA,EACT;AAAA,EACS;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUjB,YACI,IACA,UACA,UACA,QACA,MACA,WACF;AACE,QAAI,MAAM,MAAM;AACZ,YAAM,IAAI,MAAM,kCAAkC;AAAA,IACtD;AACA,QAAI,UAAU,MAAM;AAChB,YAAM,IAAI,MAAM,sCAAsC;AAAA,IAC1D;AACA,QAAI,QAAQ,MAAM;AACd,YAAM,IAAI,MAAM,oCAAoC;AAAA,IACxD;AACA,SAAK,KAAK;AACV,SAAK,WAAW;AAChB,SAAK,WAAW;AAChB,SAAK,SAAS;AACd,SAAK,OAAO,IAAI,KAAK,IAAI;AACzB,SAAK,YAAY;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA,EAKO,YAAoB;AACvB,WAAO;AAAA,MACH,SAAS,CAAC,YAAiB;AACvB,aAAK,OAAO,QAAQ,OAAO;AAC3B,aAAK,QAAQ;AAAA,MACjB;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKO,UAAU,QAAsB;AACnC,QAAI,UAAU,MAAM;AAChB,YAAM,IAAI,MAAM,sCAAsC;AAAA,IAC1D;AACA,SAAK,SAAS;AAAA,EAClB;AAAA;AAAA;AAAA;AAAA,EAKO,QAAgB;AACnB,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAKO,UAAgB;AACnB,WAAO,IAAI,KAAK,KAAK,IAAI;AAAA,EAC7B;AAAA;AAAA;AAAA;AAAA,EAKO,cAAsB;AACzB,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAKO,cAAuB;AAC1B,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAKO,UAAe;AAClB,WAAO;AAAA,MACH,IAAI,KAAK,MAAM;AAAA,MACf,UAAU,KAAK,YAAY;AAAA,MAC3B,UAAU,KAAK,YAAY;AAAA,MAC3B,MAAM,KAAK,QAAQ,EAAE,YAAY;AAAA,MACjC,SAAS;AAAA,IACb;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKO,WAAmB;AACtB,WAAO,sBAAsB,KAAK,MAAM,CAAC,UAAU,KAAK,QAAQ,EAAE,YAAY,CAAC,cAAc,KAAK,YAAY,CAAC;AAAA,EACnH;AAAA;AAAA;AAAA;AAAA,EAKO,oBAA4B;AAC/B,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAKO,UAAgB;AACnB,QAAI,KAAK,WAAW;AAChB,WAAK,UAAU;AAAA,IACnB;AAAA,EACJ;AACJ;",
  "names": []
}
