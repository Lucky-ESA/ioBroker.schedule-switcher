{
  "version": 3,
  "sources": ["../../src/serialization/ConditionActionSerializer.ts"],
  "sourcesContent": ["import type { Action } from \"../actions/Action\";\nimport { ConditionAction } from \"../actions/ConditionAction\";\nimport type { Condition } from \"../actions/conditions/Condition\";\nimport type { LoggingService } from \"../services/LoggingService\";\nimport type { Serializer } from \"./Serializer\";\nimport type { UniversalSerializer } from \"./UniversalSerializer\";\n\n/**\n * ConditionActionSerializer\n */\nexport class ConditionActionSerializer implements Serializer<Action> {\n    /**\n     * @param conditionSerializer Serializer\n     * @param actionSerializer Action\n     * @param logger Logs\n     */\n    constructor(\n        private conditionSerializer: UniversalSerializer<Condition>,\n        private actionSerializer: UniversalSerializer<Action>,\n        private logger: LoggingService,\n    ) {\n        this.logger = logger;\n    }\n\n    /**\n     * @param stringToDeserialize Action\n     */\n    deserialize(stringToDeserialize: string): Action {\n        const json = JSON.parse(stringToDeserialize);\n        if (json.type !== this.getType()) {\n            this.logger.logError(`Can not deserialize object of type ${json.type}`);\n        }\n        return new ConditionAction(\n            this.conditionSerializer.deserialize(JSON.stringify(json.condition)),\n            this.actionSerializer.deserialize(JSON.stringify(json.action)),\n            this.logger,\n        );\n    }\n\n    /**\n     * @param objectToSerialize Action\n     */\n    serialize(objectToSerialize: Action): string {\n        if (objectToSerialize == null) {\n            this.logger.logError(\"objectToSerialize may not be null or undefined.\");\n            return JSON.stringify({});\n        }\n        if (objectToSerialize instanceof ConditionAction) {\n            return JSON.stringify({\n                type: this.getType(),\n                condition: JSON.parse(this.conditionSerializer.serialize(objectToSerialize.getCondition())),\n                action: JSON.parse(this.actionSerializer.serialize(objectToSerialize.getAction())),\n            });\n        }\n        this.logger.logError(\"objectToSerialize must be of type ConditionAction.\");\n        return JSON.stringify({});\n    }\n\n    /**\n     * getType\n     */\n    public getType(): string {\n        return ConditionAction.prototype.constructor.name;\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,6BAAgC;AASzB,MAAM,0BAAwD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMjE,YACY,qBACA,kBACA,QACV;AAHU;AACA;AACA;AAER,SAAK,SAAS;AAAA,EAClB;AAAA;AAAA;AAAA;AAAA,EAKA,YAAY,qBAAqC;AAC7C,UAAM,OAAO,KAAK,MAAM,mBAAmB;AAC3C,QAAI,KAAK,SAAS,KAAK,QAAQ,GAAG;AAC9B,WAAK,OAAO,SAAS,sCAAsC,KAAK,IAAI,EAAE;AAAA,IAC1E;AACA,WAAO,IAAI;AAAA,MACP,KAAK,oBAAoB,YAAY,KAAK,UAAU,KAAK,SAAS,CAAC;AAAA,MACnE,KAAK,iBAAiB,YAAY,KAAK,UAAU,KAAK,MAAM,CAAC;AAAA,MAC7D,KAAK;AAAA,IACT;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,UAAU,mBAAmC;AACzC,QAAI,qBAAqB,MAAM;AAC3B,WAAK,OAAO,SAAS,iDAAiD;AACtE,aAAO,KAAK,UAAU,CAAC,CAAC;AAAA,IAC5B;AACA,QAAI,6BAA6B,wCAAiB;AAC9C,aAAO,KAAK,UAAU;AAAA,QAClB,MAAM,KAAK,QAAQ;AAAA,QACnB,WAAW,KAAK,MAAM,KAAK,oBAAoB,UAAU,kBAAkB,aAAa,CAAC,CAAC;AAAA,QAC1F,QAAQ,KAAK,MAAM,KAAK,iBAAiB,UAAU,kBAAkB,UAAU,CAAC,CAAC;AAAA,MACrF,CAAC;AAAA,IACL;AACA,SAAK,OAAO,SAAS,oDAAoD;AACzE,WAAO,KAAK,UAAU,CAAC,CAAC;AAAA,EAC5B;AAAA;AAAA;AAAA;AAAA,EAKO,UAAkB;AACrB,WAAO,uCAAgB,UAAU,YAAY;AAAA,EACjD;AACJ;",
  "names": []
}
