{
  "version": 3,
  "sources": ["../../src/serialization/AstroTriggerSerializer.ts"],
  "sourcesContent": ["import type { Action } from \"../actions/Action\";\nimport { AstroTrigger } from \"../triggers/AstroTrigger\";\nimport { AstroTriggerBuilder } from \"../triggers/AstroTriggerBuilder\";\nimport type { Trigger } from \"../triggers/Trigger\";\nimport type { Serializer } from \"./Serializer\";\nimport type { UniversalSerializer } from \"./UniversalSerializer\";\n\n/**\n * AstroTriggerSerializer\n */\nexport class AstroTriggerSerializer implements Serializer<Trigger> {\n    /**\n     * @param actionSerializer UniversalSerializer\n     */\n    constructor(private readonly actionSerializer: UniversalSerializer<Action>) {}\n\n    /**\n     * @param stringToDeserialize Trigger\n     */\n    public deserialize(stringToDeserialize: string): Trigger {\n        const json = JSON.parse(stringToDeserialize);\n        if (json.type !== this.getType()) {\n            throw new Error(`Can not deserialize object of type ${json.type}`);\n        }\n        return new AstroTriggerBuilder()\n            .setAction(this.actionSerializer.deserialize(JSON.stringify(json.action)))\n            .setAstroTime(json.astroTime)\n            .setShift(json.shiftInMinutes)\n            .setObjectId(json.objectId)\n            .setValueCheck(json.valueCheck)\n            .setTodayTrigger(json.todayTrigger)\n            .setWeekdays(json.weekdays)\n            .setId(json.id)\n            .build();\n    }\n\n    /**\n     * @param objectToSerialize Trigger\n     */\n    public serialize(objectToSerialize: Trigger): string {\n        if (objectToSerialize == null) {\n            throw new Error(\"objectToSerialize may not be null or undefined.\");\n        }\n        if (objectToSerialize instanceof AstroTrigger) {\n            return JSON.stringify({\n                type: this.getType(),\n                astroTime: objectToSerialize.getAstroTime(),\n                shiftInMinutes: objectToSerialize.getShiftInMinutes(),\n                weekdays: objectToSerialize.getWeekdays(),\n                objectId: objectToSerialize.getObjectId(),\n                valueCheck: objectToSerialize.getValueCheck(),\n                id: objectToSerialize.getId(),\n                action: JSON.parse(this.actionSerializer.serialize(objectToSerialize.getAction())),\n                todayTrigger: objectToSerialize.getTodayTrigger(),\n            });\n        }\n        throw new Error(\"objectToSerialize must be of type AstroTrigger.\");\n    }\n    /**\n     * getType\n     */\n    getType(): string {\n        return AstroTrigger.prototype.constructor.name;\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,0BAA6B;AAC7B,iCAAoC;AAQ7B,MAAM,uBAAsD;AAAA;AAAA;AAAA;AAAA,EAI/D,YAA6B,kBAA+C;AAA/C;AAAA,EAAgD;AAAA;AAAA;AAAA;AAAA,EAKtE,YAAY,qBAAsC;AACrD,UAAM,OAAO,KAAK,MAAM,mBAAmB;AAC3C,QAAI,KAAK,SAAS,KAAK,QAAQ,GAAG;AAC9B,YAAM,IAAI,MAAM,sCAAsC,KAAK,IAAI,EAAE;AAAA,IACrE;AACA,WAAO,IAAI,+CAAoB,EAC1B,UAAU,KAAK,iBAAiB,YAAY,KAAK,UAAU,KAAK,MAAM,CAAC,CAAC,EACxE,aAAa,KAAK,SAAS,EAC3B,SAAS,KAAK,cAAc,EAC5B,YAAY,KAAK,QAAQ,EACzB,cAAc,KAAK,UAAU,EAC7B,gBAAgB,KAAK,YAAY,EACjC,YAAY,KAAK,QAAQ,EACzB,MAAM,KAAK,EAAE,EACb,MAAM;AAAA,EACf;AAAA;AAAA;AAAA;AAAA,EAKO,UAAU,mBAAoC;AACjD,QAAI,qBAAqB,MAAM;AAC3B,YAAM,IAAI,MAAM,iDAAiD;AAAA,IACrE;AACA,QAAI,6BAA6B,kCAAc;AAC3C,aAAO,KAAK,UAAU;AAAA,QAClB,MAAM,KAAK,QAAQ;AAAA,QACnB,WAAW,kBAAkB,aAAa;AAAA,QAC1C,gBAAgB,kBAAkB,kBAAkB;AAAA,QACpD,UAAU,kBAAkB,YAAY;AAAA,QACxC,UAAU,kBAAkB,YAAY;AAAA,QACxC,YAAY,kBAAkB,cAAc;AAAA,QAC5C,IAAI,kBAAkB,MAAM;AAAA,QAC5B,QAAQ,KAAK,MAAM,KAAK,iBAAiB,UAAU,kBAAkB,UAAU,CAAC,CAAC;AAAA,QACjF,cAAc,kBAAkB,gBAAgB;AAAA,MACpD,CAAC;AAAA,IACL;AACA,UAAM,IAAI,MAAM,iDAAiD;AAAA,EACrE;AAAA;AAAA;AAAA;AAAA,EAIA,UAAkB;AACd,WAAO,iCAAa,UAAU,YAAY;AAAA,EAC9C;AACJ;",
  "names": []
}
